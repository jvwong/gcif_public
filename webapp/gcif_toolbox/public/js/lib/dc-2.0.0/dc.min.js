dc=function(){"use strict";var a={version:"2.0.0-dev",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};a.chartRegistry=function(){function b(b){return b||(b=a.constants.DEFAULT_CHART_GROUP),c[b]||(c[b]=[]),b}var c={};return{has:function(a){for(var b in c)if(c[b].indexOf(a)>=0)return!0;return!1},register:function(a,d){d=b(d),c[d].push(a)},deregister:function(a,d){d=b(d);for(var e=0;e<c[d].length;e++)if(c[d][e].anchorName()===a.anchorName()){c[d].splice(e,1);break}},clear:function(a){a?delete c[a]:c={}},list:function(a){return a=b(a),c[a]}}}(),a.registerChart=function(b,c){a.chartRegistry.register(b,c)},a.deregisterChart=function(b,c){a.chartRegistry.deregister(b,c)},a.hasChart=function(b){return a.chartRegistry.has(b)},a.deregisterAllCharts=function(b){a.chartRegistry.clear(b)},a.filterAll=function(b){for(var c=a.chartRegistry.list(b),d=0;d<c.length;++d)c[d].filterAll()},a.refocusAll=function(b){for(var c=a.chartRegistry.list(b),d=0;d<c.length;++d)c[d].focus&&c[d].focus()},a.renderAll=function(b){for(var c=a.chartRegistry.list(b),d=0;d<c.length;++d)c[d].render();null!==a._renderlet&&a._renderlet(b)},a.redrawAll=function(b){for(var c=a.chartRegistry.list(b),d=0;d<c.length;++d)c[d].redraw();null!==a._renderlet&&a._renderlet(b)},a.disableTransitions=!1,a.transition=function(b,c,d){if(0>=c||void 0===c||a.disableTransitions)return b;var e=b.transition().duration(c);return"function"==typeof d&&d(e),e},a.units={},a.units.integers=function(a,b){return Math.abs(b-a)},a.units.ordinal=function(a,b,c){return c},a.units.fp={},a.units.fp.precision=function(b){var c=function(b,d){var e=Math.abs((d-b)/c.resolution);return a.utils.isNegligible(e-Math.floor(e))?Math.floor(e):Math.ceil(e)};return c.resolution=b,c},a.round={},a.round.floor=function(a){return Math.floor(a)},a.round.ceil=function(a){return Math.ceil(a)},a.round.round=function(a){return Math.round(a)},a.override=function(a,b,c){var d=a[b];a["_"+b]=d,a[b]=c},a.renderlet=function(b){return arguments.length?(a._renderlet=b,a):a._renderlet},a.instanceOfChart=function(a){return a instanceof Object&&a.__dc_flag__&&!0},a.errors={},a.errors.Exception=function(a){var b=a||"Unexpected internal error";this.message=b,this.toString=function(){return b}},a.errors.InvalidStateException=function(){a.errors.Exception.apply(this,arguments)},a.dateFormat=d3.time.format("%m/%d/%Y"),a.printers={},a.printers.filters=function(b){for(var c="",d=0;d<b.length;++d)d>0&&(c+=", "),c+=a.printers.filter(b[d]);return c},a.printers.filter=function(b){var c="";return b&&(b instanceof Array?b.length>=2?c="["+a.utils.printSingleValue(b[0])+" -> "+a.utils.printSingleValue(b[1])+"]":b.length>=1&&(c=a.utils.printSingleValue(b[0])):c=a.utils.printSingleValue(b)),c},a.pluck=function(a,b){return b?function(c,d){return b.call(c,c[a],d)}:function(b){return b[a]}},a.utils={},a.utils.printSingleValue=function(b){var c=""+b;return b instanceof Date?c=a.dateFormat(b):"string"==typeof b?c=b:a.utils.isFloat(b)?c=a.utils.printSingleValue.fformat(b):a.utils.isInteger(b)&&(c=Math.round(b)),c},a.utils.printSingleValue.fformat=d3.format(".2f"),a.utils.add=function(a,b){if("string"==typeof b&&(b=b.replace("%","")),a instanceof Date){"string"==typeof b&&(b=+b);var c=new Date;return c.setTime(a.getTime()),c.setDate(a.getDate()+b),c}if("string"==typeof b){var d=+b/100;return a>0?a*(1+d):a*(1-d)}return a+b},a.utils.subtract=function(a,b){if("string"==typeof b&&(b=b.replace("%","")),a instanceof Date){"string"==typeof b&&(b=+b);var c=new Date;return c.setTime(a.getTime()),c.setDate(a.getDate()-b),c}if("string"==typeof b){var d=+b/100;return 0>a?a*(1+d):a*(1-d)}return a-b},a.utils.isNumber=function(a){return a===+a},a.utils.isFloat=function(a){return a===+a&&a!==(0|a)},a.utils.isInteger=function(a){return a===+a&&a===(0|a)},a.utils.isNegligible=function(b){return!a.utils.isNumber(b)||b<a.constants.NEGLIGIBLE_NUMBER&&b>-a.constants.NEGLIGIBLE_NUMBER},a.utils.clamp=function(a,b,c){return b>a?b:a>c?c:a};var b=0;return a.utils.uniqueId=function(){return++b},a.utils.nameToId=function(a){return a.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},a.utils.appendOrSelect=function(a,b){var c=a.select(b);return c.empty()&&(c=a.append(b)),c},a.utils.safeNumber=function(b){return a.utils.isNumber(+b)?+b:0},a.logger={},a.logger.enableDebugLog=!1,a.logger.warn=function(b){return console&&(console.warn?console.warn(b):console.log&&console.log(b)),a.logger},a.logger.debug=function(b){return a.logger.enableDebugLog&&console&&(console.debug?console.debug(b):console.log&&console.log(b)),a.logger},a.events={current:null},a.events.trigger=function(b,c){return c?(a.events.current=b,void setTimeout(function(){b==a.events.current&&b()},c)):void b()},a.filters={},a.filters.RangedFilter=function(a,b){var c=Array(a,b);return c.isFiltered=function(a){return a>=this[0]&&a<this[1]},c},a.filters.TwoDimensionalFilter=function(a){if(null===a)return null;var b=a;return b.isFiltered=function(a){return a.length&&a.length==b.length&&a[0]==b[0]&&a[1]==b[1]},b},a.filters.RangedTwoDimensionalFilter=function(a){if(null===a)return null;var b,c=a;return b=c[0]instanceof Array?[[Math.min(a[0][0],a[1][0]),Math.min(a[0][1],a[1][1])],[Math.max(a[0][0],a[1][0]),Math.max(a[0][1],a[1][1])]]:[[a[0],-1/0],[a[1],1/0]],c.isFiltered=function(a){var c,d;if(a instanceof Array){if(2!=a.length)return!1;c=a[0],d=a[1]}else c=a,d=b[0][1];return c>=b[0][0]&&c<b[1][0]&&d>=b[0][1]&&d<b[1][1]},c},a.baseMixin=function(b){function c(){return n=b.root().append("svg").attr("width",b.width()).attr("height",b.height())}function d(c){if(!b[c]||!b[c]())throw new a.errors.InvalidStateException("Mandatory attribute chart."+c+" is missing on chart[#"+b.anchorName()+"]")}function e(a){K.splice(K.indexOf(a),1),h(),b._invokeFilteredListener(a)}function f(a){K.push(a),h(),b._invokeFilteredListener(a)}function g(){K=[],h(),b._invokeFilteredListener(null)}function h(){if(b.dimension()&&b.dimension().filter){var a=L(b.dimension(),K);K=a?a:K}}function i(){for(var a=0;a<F.length;++a)F[a](b)}b.__dc_flag__=a.utils.uniqueId();var j,k,l,m,n,o,p,q=200,r=function(a){var b=a&&a.getBoundingClientRect&&a.getBoundingClientRect().width;return b&&b>q?b:q},s=r,t=200,u=function(a){var b=a&&a.getBoundingClientRect&&a.getBoundingClientRect().height;return b&&b>t?b:t},v=u,w=a.pluck("key"),x=a.pluck("value"),y=a.pluck("key"),z=a.pluck("key"),A=!1,B=function(a){return b.keyAccessor()(a)+": "+b.valueAccessor()(a)},C=!1,D=750,E=a.printers.filters,F=[],G=["dimension","group"],H=a.constants.DEFAULT_CHART_GROUP,I=function(){},J={preRender:I,postRender:I,preRedraw:I,postRedraw:I,filtered:I,zoomed:I},K=[],L=function(a,b){return a.filter(null),0===b.length?a.filter(null):a.filterFunction(function(a){for(var c=0;c<b.length;c++){var d=b[c];if(d.isFiltered&&d.isFiltered(a))return!0;if(d==a)return!0}return!1}),b},M=function(a){return a.all()};return b.width=function(a){return arguments.length?(s=d3.functor(a||r),b):s(m.node())},b.height=function(a){return arguments.length?(v=d3.functor(a||u),b):v(m.node())},b.minWidth=function(a){return arguments.length?(q=a,b):q},b.minHeight=function(a){return arguments.length?(t=a,b):t},b.dimension=function(a){return arguments.length?(j=a,b.expireCache(),b):j},b.data=function(a){return arguments.length?(M=d3.functor(a),b.expireCache(),b):M.call(b,k)},b.group=function(a,c){return arguments.length?(k=a,b._groupName=c,b.expireCache(),b):k},b.ordering=function(a){return arguments.length?(z=a,o=crossfilter.quicksort.by(z),b.expireCache(),b):z},b._computeOrderedGroups=function(a){var b=a.slice(0);return b.length<=1?b:(o||(o=crossfilter.quicksort.by(z)),o(b,0,b.length))},b.filterAll=function(){return b.filter(null)},b.select=function(a){return m.select(a)},b.selectAll=function(a){return m?m.selectAll(a):null},b.anchor=function(c,d){return arguments.length?(a.instanceOfChart(c)?(l=c.anchor(),m=c.root()):(l=c,m=d3.select(l),m.classed(a.constants.CHART_CLASS,!0),a.registerChart(b,d)),H=d,b):l},b.anchorName=function(){var a=b.anchor();return a&&a.id?a.id:a&&a.replace?a.replace("#",""):""+b.chartID()},b.root=function(a){return arguments.length?(m=a,b):m},b.svg=function(a){return arguments.length?(n=a,b):n},b.resetSvg=function(){return b.select("svg").remove(),c()},b.filterPrinter=function(a){return arguments.length?(E=a,b):E},b.turnOnControls=function(){return m&&(b.selectAll(".reset").style("display",null),b.selectAll(".filter").text(E(b.filters())).style("display",null)),b},b.turnOffControls=function(){return m&&(b.selectAll(".reset").style("display","none"),b.selectAll(".filter").style("display","none").text(b.filter())),b},b.transitionDuration=function(a){return arguments.length?(D=a,b):D},b._mandatoryAttributes=function(a){return arguments.length?(G=a,b):G},b.render=function(){J.preRender(b),G&&G.forEach(d);var a=b._doRender();return p&&p.render(),b._activateRenderlets("postRender"),a},b._activateRenderlets=function(a){b.transitionDuration()>0&&n?n.transition().duration(b.transitionDuration()).each("end",function(){i(),a&&J[a](b)}):(i(),a&&J[a](b))},b.redraw=function(){J.preRedraw(b);var a=b._doRedraw();return p&&p.render(),b._activateRenderlets("postRedraw"),a},b.redrawGroup=function(){a.redrawAll(b.chartGroup())},b._invokeFilteredListener=function(a){void 0!==a&&J.filtered(b,a)},b._invokeZoomedListener=function(){J.zoomed(b)},b.hasFilter=function(a){return arguments.length?K.indexOf(a)>=0:K.length>0},b.replaceFilter=function(a){K=[],b.filter(a)},b.filter=function(a){return arguments.length?(a instanceof Array&&a[0]instanceof Array&&!a.isFiltered?(a[0].forEach(function(a){b.hasFilter(a)?K.splice(K.indexOf(a),1):K.push(a)}),h(),b._invokeFilteredListener(a)):null===a?g():b.hasFilter(a)?e(a):f(a),null!==m&&b.hasFilter()?b.turnOnControls():b.turnOffControls(),b):K.length>0?K[0]:null},b.filters=function(){return K},b.highlightSelected=function(b){d3.select(b).classed(a.constants.SELECTED_CLASS,!0),d3.select(b).classed(a.constants.DESELECTED_CLASS,!1)},b.fadeDeselected=function(b){d3.select(b).classed(a.constants.SELECTED_CLASS,!1),d3.select(b).classed(a.constants.DESELECTED_CLASS,!0)},b.resetHighlight=function(b){d3.select(b).classed(a.constants.SELECTED_CLASS,!1),d3.select(b).classed(a.constants.DESELECTED_CLASS,!1)},b.onClick=function(c){var d=b.keyAccessor()(c);a.events.trigger(function(){b.filter(d),b.redrawGroup()})},b.filterHandler=function(a){return arguments.length?(L=a,b):L},b._doRender=function(){return b},b._doRedraw=function(){return b},b.legendables=function(){return[]},b.legendHighlight=function(){},b.legendReset=function(){},b.legendToggle=function(){},b.isLegendableHidden=function(){return!1},b.keyAccessor=function(a){return arguments.length?(w=a,b):w},b.valueAccessor=function(a){return arguments.length?(x=a,b):x},b.label=function(a){return arguments.length?(y=a,A=!0,b):y},b.renderLabel=function(a){return arguments.length?(A=a,b):A},b.title=function(a){return arguments.length?(B=a,C=!0,b):B},b.renderTitle=function(a){return arguments.length?(C=a,b):C},b.renderlet=function(a){return F.push(a),b},b.chartGroup=function(a){return arguments.length?(H=a,b):H},b.expireCache=function(){return b},b.legend=function(a){return arguments.length?(p=a,p.parent(b),b):p},b.chartID=function(){return b.__dc_flag__},b.options=function(c){for(var d in c)"function"==typeof b[d]?b[d].call(b,c[d]):a.logger.debug("Not a valid option setter name: "+d);return b},b.on=function(a,c){return J[a]=c,b},b},a.marginMixin=function(a){var b={top:10,right:50,bottom:30,left:30};return a.margins=function(c){return arguments.length?(b=c,a):b},a.effectiveWidth=function(){return a.width()-a.margins().left-a.margins().right},a.effectiveHeight=function(){return a.height()-a.margins().top-a.margins().bottom},a},a.colorMixin=function(a){var b=d3.scale.category20c(),c=!0,d=function(b){return a.keyAccessor()(b)};return a.colors=function(c){return arguments.length?(b=c instanceof Array?d3.scale.quantize().range(c):d3.functor(c),a):b},a.ordinalColors=function(b){return a.colors(d3.scale.ordinal().range(b))},a.linearColors=function(b){return a.colors(d3.scale.linear().range(b).interpolate(d3.interpolateHcl))},a.colorAccessor=function(b){return arguments.length?(d=b,c=!1,a):d},a.defaultColorAccessor=function(){return c},a.colorDomain=function(c){return arguments.length?(b.domain(c),a):b.domain()},a.calculateColorDomain=function(){var c=[d3.min(a.data(),a.colorAccessor()),d3.max(a.data(),a.colorAccessor())];b.domain(c)},a.getColor=function(a,c){return b(d.call(this,a,c))},a.colorCalculator=function(b){return arguments.length?(a.getColor=b,a):a.getColor},a},a.coordinateGridMixin=function(b){function c(a){b.elasticX()&&!b.isOrdinal()?w.domain([b.xAxisMin(),b.xAxisMax()]):b.isOrdinal()&&0===w.domain().length&&w.domain(b._ordinalXDomain()),b.isOrdinal()?w.rangeBands([0,b.xAxisLength()],_,$):w.range([0,b.xAxisLength()]),F=F.scale(b.x()),d(a)}function d(c){var d=c.selectAll("g."+p);if(R){d.empty()&&(d=c.insert("g",":first-child").attr("class",n+" "+p).attr("transform","translate("+b.margins().left+","+b.margins().top+")"));var e=F.tickValues()?F.tickValues():w.ticks(F.ticks()[0]),f=d.selectAll("line").data(e),g=f.enter().append("line").attr("x1",function(a){return w(a)}).attr("y1",b._xAxisY()-b.margins().top).attr("x2",function(a){return w(a)}).attr("y2",0).attr("opacity",0);a.transition(g,b.transitionDuration()).attr("opacity",1),a.transition(f,b.transitionDuration()).attr("x1",function(a){return w(a)}).attr("y1",b._xAxisY()-b.margins().top).attr("x2",function(a){return w(a)}).attr("y2",0),f.exit().remove()}else d.selectAll("line").remove()}function e(){return b._xAxisY()-b.margins().top}function f(){return b.anchorName()+"-clip"}function g(){var c=a.utils.appendOrSelect(t,"defs"),d=a.utils.appendOrSelect(c,"clipPath").attr("id",f()),e=2*Z;a.utils.appendOrSelect(d,"rect").attr("width",b.xAxisLength()+e).attr("height",b.yAxisHeight()+e)}function h(a){b.isOrdinal()&&(P=!1),c(b.g()),b._prepareYAxis(b.g()),b.plotData(),(b.elasticX()||S||a)&&b.renderXAxis(b.g()),(b.elasticY()||a)&&b.renderYAxis(b.g()),a?b.renderBrush(b.g()):b.redrawBrush(b.g())}function i(){Y?b._enableMouseZoom():X&&b._disableMouseZoom()}function j(){S=!0,U&&(b.x().domain(k(b.x().domain(),x)),D&&b.x().domain(k(b.x().domain(),D.x().domain())));var c=b.x().domain(),d=a.filters.RangedFilter(c[0],c[1]);b.replaceFilter(d),b.rescale(),b.redraw(),D&&!l(b.filter(),D.filter())&&a.events.trigger(function(){D.replaceFilter(d),D.redraw()}),b._invokeZoomedListener(),a.events.trigger(function(){b.redrawGroup()},a.constants.EVENT_DELAY),S=!l(c,x)}function k(a,b){var c=[];return c[0]=d3.max([a[0],b[0]]),c[1]=d3.min([a[1],b[1]]),c}function l(a,b){return a||b?a&&b?0===a.length&&0===b.length?!0:a[0].valueOf()===b[0].valueOf()&&a[1].valueOf()===b[1].valueOf()?!0:!1:!1:!0}function m(a){return a instanceof Array&&a.length>1}var n="grid-line",o="horizontal",p="vertical",q="y-axis-label",r="x-axis-label",s=12;b=a.colorMixin(a.marginMixin(a.baseMixin(b))),b.colors(d3.scale.category10()),b._mandatoryAttributes().push("x");var t,u,v,w,x,y,z,A,B,C,D,E,F=d3.svg.axis().orient("bottom"),G=a.units.integers,H=0,I=!1,J=0,K=d3.svg.axis().orient("left"),L=0,M=!1,N=0,O=d3.svg.brush(),P=!0,Q=!1,R=!1,S=!1,T=[1,1/0],U=!0,V=d3.behavior.zoom().on("zoom",j),W=d3.behavior.zoom().on("zoom",null),X=!1,Y=!1,Z=0,$=.5,_=0,ab=!1;return b.rescale=function(){C=void 0},b.rangeChart=function(a){return arguments.length?(D=a,D.focusChart(b),b):D},b.zoomScale=function(a){return arguments.length?(T=a,b):T},b.zoomOutRestrict=function(a){return arguments.length?(T[0]=a?1:0,U=a,b):U},b._generateG=function(a){return t=void 0===a?b.svg():a,u=t.append("g"),v=u.append("g").attr("class","chart-body").attr("transform","translate("+b.margins().left+", "+b.margins().top+")").attr("clip-path","url(#"+f()+")"),u},b.g=function(a){return arguments.length?(u=a,b):u},b.mouseZoomable=function(a){return arguments.length?(Y=a,b):Y},b.chartBodyG=function(a){return arguments.length?(v=a,b):v},b.x=function(a){return arguments.length?(w=a,x=w.domain(),b):w},b.xOriginalDomain=function(){return x},b.xUnits=function(a){return arguments.length?(G=a,b):G},b.xAxis=function(a){return arguments.length?(F=a,b):F},b.elasticX=function(a){return arguments.length?(I=a,b):I},b.xAxisPadding=function(a){return arguments.length?(H=a,b):H},b.xUnitCount=function(){if(void 0===C){var a=b.xUnits()(b.x().domain()[0],b.x().domain()[1],b.x().domain());C=a instanceof Array?a.length:a}return C},b.useRightYAxis=function(a){return arguments.length?(ab=a,b):ab},b.isOrdinal=function(){return b.xUnits()===a.units.ordinal},b._ordinalXDomain=function(){var a=b._computeOrderedGroups(b.data());return a.map(b.keyAccessor())},b.renderXAxis=function(c){var d=c.selectAll("g.x");d.empty()&&(d=c.append("g").attr("class","axis x").attr("transform","translate("+b.margins().left+","+b._xAxisY()+")"));var e=c.selectAll("text."+r);e.empty()&&b.xAxisLabel()&&(e=c.append("text").attr("transform","translate("+(b.margins().left+b.xAxisLength()/2)+","+(b.height()-J)+")").attr("class",r).attr("text-anchor","middle").text(b.xAxisLabel())),b.xAxisLabel()&&e.text()!=b.xAxisLabel()&&e.text(b.xAxisLabel()),a.transition(d,b.transitionDuration()).call(F)},b._xAxisY=function(){return b.height()-b.margins().bottom},b.xAxisLength=function(){return b.effectiveWidth()},b.xAxisLabel=function(a,c){return arguments.length?(y=a,b.margins().bottom-=J,J=void 0===c?s:c,b.margins().bottom+=J,b):y},b._prepareYAxis=function(a){(void 0===z||b.elasticY())&&(z=d3.scale.linear(),z.domain([b.yAxisMin(),b.yAxisMax()]).rangeRound([b.yAxisHeight(),0])),z.range([b.yAxisHeight(),0]),K=K.scale(z),ab&&K.orient("right"),b._renderHorizontalGridLinesForAxis(a,z,K)},b.renderYAxisLabel=function(a,c,d,e){e=e||N;var f=b.g().selectAll("text."+q+"."+a+"-label");if(f.empty()&&c){var g=b.margins().top+b.yAxisHeight()/2;f=b.g().append("text").attr("transform","translate("+e+","+g+"),rotate("+d+")").attr("class",q+" "+a+"-label").attr("text-anchor","middle").text(c)}c&&f.text()!=c&&f.text(c)},b.renderYAxisAt=function(c,d,e){var f=b.g().selectAll("g."+c);f.empty()&&(f=b.g().append("g").attr("class","axis "+c).attr("transform","translate("+e+","+b.margins().top+")")),a.transition(f,b.transitionDuration()).call(d)},b.renderYAxis=function(){var a=ab?b.width()-b.margins().right:b._yAxisX();b.renderYAxisAt("y",K,a);var c=ab?b.width()-N:N,d=ab?90:-90;b.renderYAxisLabel("y",b.yAxisLabel(),d,c)},b._renderHorizontalGridLinesForAxis=function(c,d,e){var f=c.selectAll("g."+o);if(Q){var g=e.tickValues()?e.tickValues():d.ticks(e.ticks()[0]);f.empty()&&(f=c.insert("g",":first-child").attr("class",n+" "+o).attr("transform","translate("+b.margins().left+","+b.margins().top+")"));var h=f.selectAll("line").data(g),i=h.enter().append("line").attr("x1",1).attr("y1",function(a){return d(a)}).attr("x2",b.xAxisLength()).attr("y2",function(a){return d(a)}).attr("opacity",0);a.transition(i,b.transitionDuration()).attr("opacity",1),a.transition(h,b.transitionDuration()).attr("x1",1).attr("y1",function(a){return d(a)}).attr("x2",b.xAxisLength()).attr("y2",function(a){return d(a)}),h.exit().remove()}else f.selectAll("line").remove()},b._yAxisX=function(){return b.useRightYAxis()?b.width()-b.margins().right:b.margins().left},b.yAxisLabel=function(a,c){return arguments.length?(A=a,b.margins().left-=N,N=void 0===c?s:c,b.margins().left+=N,b):A},b.y=function(a){return arguments.length?(z=a,b):z},b.yAxis=function(a){return arguments.length?(K=a,b):K},b.elasticY=function(a){return arguments.length?(M=a,b):M},b.renderHorizontalGridLines=function(a){return arguments.length?(Q=a,b):Q},b.renderVerticalGridLines=function(a){return arguments.length?(R=a,b):R},b.xAxisMin=function(){var c=d3.min(b.data(),function(a){return b.keyAccessor()(a)});return a.utils.subtract(c,H)},b.xAxisMax=function(){var c=d3.max(b.data(),function(a){return b.keyAccessor()(a)});return a.utils.add(c,H)},b.yAxisMin=function(){var c=d3.min(b.data(),function(a){return b.valueAccessor()(a)});return a.utils.subtract(c,L)},b.yAxisMax=function(){var c=d3.max(b.data(),function(a){return b.valueAccessor()(a)});return a.utils.add(c,L)},b.yAxisPadding=function(a){return arguments.length?(L=a,b):L},b.yAxisHeight=function(){return b.effectiveHeight()},b.round=function(a){return arguments.length?(B=a,b):B},b._rangeBandPadding=function(a){return arguments.length?(_=a,b):_},b._outerRangeBandPadding=function(a){return arguments.length?($=a,b):$},a.override(b,"filter",function(a){return arguments.length?(b._filter(a),a?b.brush().extent(a):b.brush().clear(),b):b._filter()}),b.brush=function(a){return arguments.length?(O=a,b):O},b.renderBrush=function(a){if(P){O.on("brush",b._brushing),O.on("brushstart",b._disableMouseZoom),O.on("brushend",i);var c=a.append("g").attr("class","brush").attr("transform","translate("+b.margins().left+","+b.margins().top+")").call(O.x(b.x()));b.setBrushY(c),b.setHandlePaths(c),b.hasFilter()&&b.redrawBrush(a)}},b.setHandlePaths=function(a){a.selectAll(".resize").append("path").attr("d",b.resizeHandlePath)},b.setBrushY=function(a){a.selectAll("rect").attr("height",e())},b.extendBrush=function(){var a=O.extent();return b.round()&&(a[0]=a.map(b.round())[0],a[1]=a.map(b.round())[1],u.select(".brush").call(O.extent(a))),a},b.brushIsEmpty=function(a){return O.empty()||!a||a[1]<=a[0]},b._brushing=function(){var c=b.extendBrush();if(b.redrawBrush(u),b.brushIsEmpty(c))a.events.trigger(function(){b.filter(null),b.redrawGroup()},a.constants.EVENT_DELAY);else{var d=a.filters.RangedFilter(c[0],c[1]);a.events.trigger(function(){b.replaceFilter(d),b.redrawGroup()},a.constants.EVENT_DELAY)}},b.redrawBrush=function(a){if(P){b.filter()&&b.brush().empty()&&b.brush().extent(b.filter());var c=a.select("g.brush");c.call(b.brush().x(b.x())),b.setBrushY(c)}b.fadeDeselectedArea()},b.fadeDeselectedArea=function(){},b.resizeHandlePath=function(a){var b=+("e"==a),c=b?1:-1,d=e()/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)},b.clipPadding=function(a){return arguments.length?(Z=a,b):Z},b._preprocessData=function(){},b._doRender=function(){return b.resetSvg(),b._preprocessData(),b._generateG(),g(),h(!0),i(),b},b._doRedraw=function(){return b._preprocessData(),h(!1),b},b._enableMouseZoom=function(){X=!0,V.x(b.x()).scaleExtent(T).size([b.width(),b.height()]),b.root().call(V)},b._disableMouseZoom=function(){b.root().call(W)},b.focus=function(a){b.x().domain(m(a)?a:x),V.x(b.x()),j()},b.refocused=function(){return S},b.focusChart=function(c){return arguments.length?(E=c,b.on("filtered",function(b){b.filter()?l(b.filter(),E.filter())||a.events.trigger(function(){E.focus(b.filter())}):a.events.trigger(function(){E.x().domain(E.xOriginalDomain())})}),b):E},b.brushOn=function(a){return arguments.length?(P=a,b):P},b},a.stackMixin=function(b){function c(a,c){var e=a.accessor||b.valueAccessor();return a.name=String(a.name||c),a.values=a.group.all().map(function(c,d){return{x:b.keyAccessor()(c,d),y:a.hidden?null:e(c,d),data:c,layer:a.name,hidden:a.hidden}}),a.values=a.values.filter(d()),a.values}function d(){if(!b.x())return d3.functor(!0);var a=b.x().domain();return b.isOrdinal()?function(){return!0}:function(b){return b.x>=a[0]&&b.x<=a[a.length-1]}}function e(b){var c=i.map(a.pluck("name")).indexOf(b);return i[c]}function f(){return b.data().reduce(function(a,b){return a.concat(b.values)},[])}function g(a){return!a.hidden}var h=d3.layout.stack().values(c),i=[],j={},k=!1;return b.stack=function(a,c,d){if(!arguments.length)return i;arguments.length<=2&&(d=c);var e={group:a};return"string"==typeof c&&(e.name=c),"function"==typeof d&&(e.accessor=d),i.push(e),b},a.override(b,"group",function(a,c,d){return arguments.length?(i=[],j={},b.stack(a,c),d&&b.valueAccessor(d),b._group(a,c)):b._group()}),b.hidableStacks=function(a){return arguments.length?(k=a,b):k},b.hideStack=function(a){var c=e(a);return c&&(c.hidden=!0),b},b.showStack=function(a){var c=e(a);return c&&(c.hidden=!1),b},b.getValueAccessorByIndex=function(a){return i[a].accessor||b.valueAccessor()},b.yAxisMin=function(){var c=d3.min(f(),function(a){return a.y+a.y0<a.y0?a.y+a.y0:a.y0});return a.utils.subtract(c,b.yAxisPadding())},b.yAxisMax=function(){var c=d3.max(f(),function(a){return a.y+a.y0});return a.utils.add(c,b.yAxisPadding())},b.xAxisMin=function(){var c=d3.min(f(),a.pluck("x"));return a.utils.subtract(c,b.xAxisPadding())},b.xAxisMax=function(){var c=d3.max(f(),a.pluck("x"));return a.utils.add(c,b.xAxisPadding())},a.override(b,"title",function(a,c){return a?"function"==typeof a?b._title(a):a==b._groupName&&"function"==typeof c?b._title(c):"function"!=typeof c?j[a]||b._title():(j[a]=c,b):b._title()}),b.stackLayout=function(a){return arguments.length?(h=a,b):h},b.data(function(){var a=i.filter(g);return a.length?b.stackLayout()(a):[]}),b._ordinalXDomain=function(){return f().map(a.pluck("x"))},b.colorAccessor(function(a){var b=this.layer||this.name||a.name||a.layer;return b}),b.legendables=function(){return i.map(function(a,c){return{chart:b,name:a.name,hidden:a.hidden||!1,color:b.getColor.call(a,a.values,c)}})},b.isLegendableHidden=function(a){var b=e(a.name);return b?b.hidden:!1},b.legendToggle=function(c){k&&(b.isLegendableHidden(c)?b.showStack(c.name):b.hideStack(c.name),a.renderAll(b.chartGroup()))},b},a.capMixin=function(b){var c=1/0,d="Others",e=function(a){var c=d3.sum(a,b.valueAccessor()),e=b.group().all(),f=d3.sum(e,b.valueAccessor()),g=a.map(b.keyAccessor()),h=e.map(b.keyAccessor()),i=d3.set(g),j=h.filter(function(a){return!i.has(a)});return f>c?a.concat([{others:j,key:d,value:f-c}]):a};return b.cappedKeyAccessor=function(a,c){return a.others?a.key:b.keyAccessor()(a,c)},b.cappedValueAccessor=function(a,c){return a.others?a.value:b.valueAccessor()(a,c)},b.data(function(a){if(1/0==c)return b._computeOrderedGroups(a.all());var d=a.top(c);return d=b._computeOrderedGroups(d),e?e(d):d}),b.cap=function(a){return arguments.length?(c=a,b):c},b.othersLabel=function(a){return arguments.length?(d=a,b):d},b.othersGrouper=function(a){return arguments.length?(e=a,b):e},a.override(b,"onClick",function(a){a.others&&b.filter([a.others]),b._onClick(a)}),b},a.bubbleMixin=function(b){var c=.3,d=10;b.BUBBLE_NODE_CLASS="node",b.BUBBLE_CLASS="bubble",b.MIN_RADIUS=10,b=a.colorMixin(b),b.renderLabel(!0),b.renderTitle(!1),b.data(function(a){return a.top(1/0)});var e=d3.scale.linear().domain([0,100]),f=function(a){return a.r};b.r=function(a){return arguments.length?(e=a,b):e},b.radiusValueAccessor=function(a){return arguments.length?(f=a,b):f},b.rMin=function(){var a=d3.min(b.data(),function(a){return b.radiusValueAccessor()(a)});return a},b.rMax=function(){var a=d3.max(b.data(),function(a){return b.radiusValueAccessor()(a)});return a},b.bubbleR=function(a){var c=b.radiusValueAccessor()(a),d=b.r()(c);return(isNaN(d)||0>=c)&&(d=0),d};var g=function(a){return b.label()(a)},h=function(a){return b.bubbleR(a)>d?1:0};b._doRenderLabel=function(c){if(b.renderLabel()){var d=c.select("text");d.empty()&&(d=c.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",b.onClick)),d.attr("opacity",0).text(g),a.transition(d,b.transitionDuration()).attr("opacity",h)}},b.doUpdateLabels=function(c){if(b.renderLabel()){var d=c.selectAll("text").text(g);a.transition(d,b.transitionDuration()).attr("opacity",h)}};var i=function(a){return b.title()(a)};return b._doRenderTitles=function(a){if(b.renderTitle()){var c=a.select("title");c.empty()&&a.append("title").text(i)}},b.doUpdateTitles=function(a){b.renderTitle()&&a.selectAll("title").text(i)},b.minRadiusWithLabel=function(a){return arguments.length?(d=a,b):d},b.maxBubbleRelativeSize=function(a){return arguments.length?(c=a,b):c},b.fadeDeselectedArea=function(){b.selectAll("g."+b.BUBBLE_NODE_CLASS).each(b.hasFilter()?function(a){b.isSelectedNode(a)?b.highlightSelected(this):b.fadeDeselected(this)}:function(){b.resetHighlight(this)})},b.isSelectedNode=function(a){return b.hasFilter(a.key)},b.onClick=function(c){var d=c.key;a.events.trigger(function(){b.filter(d),a.redrawAll(b.chartGroup())})},b},a.pieChart=function(b,c){function d(){C=C?C:d3.min([J.width(),J.height()])/2;var a=q(),b=s(),c=b(J.data());if(D){var d=D.selectAll("g."+G).data(c);e(d,a,c),k(c,a),o(d),p()}}function e(a,b,c){var d=f(a);g(d,b),h(d),j(c,b)}function f(a){var b=a.enter().append("g").attr("class",function(a,b){return G+" _"+b});return b}function g(b,c){var d=b.append("path").attr("fill",x).on("click",y).attr("d",function(a,b){return z(a,b,c)});a.transition(d,J.transitionDuration(),function(a){a.attrTween("d",v)})}function h(a){J.renderTitle()&&a.append("title").text(function(a){return J.title()(a)})}function i(b,c){a.transition(b,J.transitionDuration()).attr("transform",function(a){return A(a,c)}).attr("text-anchor","middle").text(function(a){var b=a.data;return u(b)||t(a)?"":J.label()(a.data)})}function j(a,b){if(J.renderLabel()){var c=D.selectAll("text."+G).data(a);c.exit().remove();var d=c.enter().append("text").attr("class",function(a,b){var c=G+" _"+b;return E&&(c+=" external"),c}).on("click",y);i(d,b)}}function k(a,b){l(a,b),m(a,b),n(a)}function l(b,c){var d=D.selectAll("g."+G).data(b).select("path").attr("d",function(a,b){return z(a,b,c)});a.transition(d,J.transitionDuration(),function(a){a.attrTween("d",v)}).attr("fill",x)}function m(a,b){if(J.renderLabel()){var c=D.selectAll("text."+G).data(a);i(c,b)}}function n(a){J.renderTitle()&&D.selectAll("g."+G).data(a).select("title").text(function(a){return J.title()(a.data)})}function o(a){a.exit().remove()}function p(){J.selectAll("g."+G).each(J.hasFilter()?function(a){r(a)?J.highlightSelected(this):J.fadeDeselected(this)}:function(){J.resetHighlight(this)})}function q(){return d3.svg.arc().outerRadius(C).innerRadius(H)}function r(a){return J.hasFilter(J.cappedKeyAccessor(a.data))}function s(){return d3.layout.pie().sort(null).value(J.cappedValueAccessor)}function t(a){var b=a.endAngle-a.startAngle;return isNaN(b)||I>b}function u(a){return 0===J.cappedValueAccessor(a)}function v(a){a.innerRadius=H;var b=this._current;w(b)&&(b={startAngle:0,endAngle:0});var c=d3.interpolate(b,a);return this._current=c(0),function(a){return z(c(a),0,q())}}function w(a){return!a||isNaN(a.startAngle)||isNaN(a.endAngle)}function x(a,b){return J.getColor(a.data,b)}function y(a,b){J.onClick(a.data,b)}function z(a,b,c){var d=c(a,b);return d.indexOf("NaN")>=0&&(d="M0,0"),d}function A(a,b){var c;return c=E?d3.svg.arc().outerRadius(C+E).innerRadius(C+E).centroid(a):b.centroid(a),isNaN(c[0])||isNaN(c[1])?"translate(0,0)":"translate("+c+")"}function B(a,b){J.selectAll("g.pie-slice").each(function(c){a.name==c.data.key&&d3.select(this).classed("highlight",b)})}var C,D,E,F=.5,G="pie-slice",H=0,I=F,J=a.capMixin(a.colorMixin(a.baseMixin({})));return J.colorAccessor(J.cappedKeyAccessor),J.title(function(a){return J.cappedKeyAccessor(a)+": "+J.cappedValueAccessor(a)}),J.slicesCap=J.cap,J.label(J.cappedKeyAccessor),J.renderLabel(!0),J.transitionDuration(350),J._doRender=function(){return J.resetSvg(),D=J.svg().append("g").attr("transform","translate("+J.cx()+","+J.cy()+")"),d(),J},J.innerRadius=function(a){return arguments.length?(H=a,J):H},J.radius=function(a){return arguments.length?(C=a,J):C},J.cx=function(){return J.width()/2},J.cy=function(){return J.height()/2},J._doRedraw=function(){return d(),J},J.minAngleForLabel=function(a){return arguments.length?(I=a,J):I},J.externalLabels=function(a){return 0===arguments.length?E:(E=a?a:void 0,J)},J.legendables=function(){return J.data().map(function(a,b){var c={name:a.key,data:a.value,others:a.others,chart:J};return c.color=J.getColor(a,b),c})},J.legendHighlight=function(a){B(a,!0)},J.legendReset=function(a){B(a,!1)},J.legendToggle=function(a){J.onClick({key:a.name,others:a.others})
},J.anchor(b,c)},a.barChart=function(b,c){function d(b){return a.utils.safeNumber(Math.abs(l.y()(b.y+b.y0)-l.y()(b.y0)))}function e(b,c,e){var f=b.selectAll("rect.bar").data(e.values,a.pluck("x"));f.enter().append("rect").attr("class","bar").attr("fill",a.pluck("data",l.getColor)).attr("height",0),l.renderTitle()&&f.append("title").text(a.pluck("data",l.title(e.name))),l.isOrdinal()&&f.on("click",g),a.transition(f,l.transitionDuration()).attr("x",function(b){var c=l.x()(b.x);return n&&(c-=i/2),l.isOrdinal()&&(c+=m/2),a.utils.safeNumber(c)}).attr("y",function(b){var c=l.y()(b.y+b.y0);return b.y<0&&(c-=d(b)),a.utils.safeNumber(c)}).attr("width",i).attr("height",function(a){return d(a)}).attr("fill",a.pluck("data",l.getColor)).select(